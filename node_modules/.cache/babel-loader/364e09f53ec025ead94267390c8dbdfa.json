{"ast":null,"code":"import _regeneratorRuntime from\"/Users/suni94/dev/dbord-FE-React-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/suni94/dev/dbord-FE-React-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/suni94/dev/dbord-FE-React-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{useCallback,useState}from\"react\";import ImageUploader from\"../../components/ImageUploader\";import api from\"../../utils/api\";import{jwtUtils}from\"../../utils/jwtUtils\";import TextArea from\"../../components/TextArea\";import{Button}from\"@mui/material\";import\"./addBoard.scss\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddBoard=function AddBoard(){var token=useSelector(function(state){return state.Auth.token;});var navigate=useNavigate();// 게시판 제목, 내용, 사진\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState({image_file:\"\",preview_URL:\"image/default_image.png\"}),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var canSubmit=useCallback(function(){return image.image_file!==\"\"&&content!==\"\"&&title!==\"\";},[image,title,content]);var handleSubmit=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;formData=new FormData();formData.append(\"title\",title);formData.append(\"content\",content);formData.append(\"file\",image.image_file);formData.append(\"user_id\",jwtUtils.getId(token));_context.next=8;return api.post(\"/api/board\",formData);case 8:window.alert(\"😎등록이 완료되었습니다😎\");navigate(\"/board-list\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);// 서버에서 받은 에러 메시지 출력\ntoast.error(\"오류발생! 이모지를 사용하면 오류가 발생할 수 있습니다\"+\"😭\",{position:\"top-center\"});case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);})),[canSubmit]);return/*#__PURE__*/_jsxs(\"div\",{className:\"addBoard-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"addBoard-header\",children:\"\\uAC8C\\uC2DC\\uBB3C \\uB4F1\\uB85D\\uD558\\uAE30 \\uD83D\\uDD8A\\uFE0F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"submitButton\",children:canSubmit()?/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,className:\"success-button\",variant:\"outlined\",children:\"\\uB4F1\\uB85D\\uD558\\uAE30\\uD83D\\uDE03\"}):/*#__PURE__*/_jsx(Button,{className:\"disable-button\",variant:\"outlined\",size:\"large\",children:\"\\uC0AC\\uC9C4\\uACFC \\uB0B4\\uC6A9\\uC744 \\uBAA8\\uB450 \\uC785\\uB825\\uD558\\uC138\\uC694\\uD83D\\uDE2D\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"addBoard-body\",children:[/*#__PURE__*/_jsx(ImageUploader,{setImage:setImage,preview_URL:image.preview_URL}),/*#__PURE__*/_jsx(TextArea,{setTitle:setTitle,setContent:setContent,title:title,content:content})]})]});};export default AddBoard;","map":{"version":3,"names":["useSelector","useNavigate","useCallback","useState","ImageUploader","api","jwtUtils","TextArea","Button","toast","AddBoard","token","state","Auth","navigate","title","setTitle","content","setContent","image_file","preview_URL","image","setImage","canSubmit","handleSubmit","formData","FormData","append","getId","post","window","alert","error","position"],"sources":["/Users/suni94/dev/dbord-FE-React-main/src/pages/add-board/AddBoard.js"],"sourcesContent":["import {useSelector} from \"react-redux\";\nimport {useNavigate} from \"react-router-dom\";\nimport {useCallback, useState} from \"react\";\nimport ImageUploader from \"../../components/ImageUploader\";\nimport api from \"../../utils/api\";\nimport {jwtUtils} from \"../../utils/jwtUtils\";\nimport TextArea from \"../../components/TextArea\";\nimport {Button} from \"@mui/material\";\nimport \"./addBoard.scss\";\nimport {toast} from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst AddBoard = () => {\n  const token = useSelector(state => state.Auth.token);\n  const navigate = useNavigate();\n\n  // 게시판 제목, 내용, 사진\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState({\n    image_file: \"\",\n    preview_URL: \"image/default_image.png\",\n  });\n  const canSubmit = useCallback(() => {\n    return image.image_file !== \"\" && content !== \"\" && title !== \"\";\n  }, [image, title, content]);\n\n  const handleSubmit = useCallback(async () => {\n    try{\n      const formData = new FormData();\n      formData.append(\"title\", title);\n      formData.append(\"content\", content);\n      formData.append(\"file\", image.image_file);\n      formData.append(\"user_id\", jwtUtils.getId(token));\n\n      await api.post(\"/api/board\", formData);\n      window.alert(\"😎등록이 완료되었습니다😎\");\n      navigate(\"/board-list\");\n    } catch (e) {\n      // 서버에서 받은 에러 메시지 출력\n      toast.error(\"오류발생! 이모지를 사용하면 오류가 발생할 수 있습니다\" + \"😭\", {\n        position: \"top-center\",\n      });\n    }\n\n  }, [canSubmit]);\n\n  return (\n    <div className=\"addBoard-wrapper\">\n      <div className=\"addBoard-header\">\n        게시물 등록하기 🖊️\n      </div>\n      <div className=\"submitButton\">\n        {canSubmit() ? (\n          <Button\n            onClick={handleSubmit}\n            className=\"success-button\"\n            variant=\"outlined\"\n          >\n            등록하기😃\n          </Button>\n        ) : (\n          <Button\n            className=\"disable-button\"\n            variant=\"outlined\"\n            size=\"large\"\n          >\n            사진과 내용을 모두 입력하세요😭\n          </Button>\n        )}\n      </div>\n      <div className=\"addBoard-body\">\n        <ImageUploader setImage={setImage} preview_URL={image.preview_URL}/>\n        <TextArea setTitle={setTitle} setContent={setContent} title={title} content={content}/>\n      </div>\n    </div>\n  );\n}\n\nexport default AddBoard;"],"mappings":"iYAAA,OAAQA,WAAR,KAA0B,aAA1B,CACA,OAAQC,WAAR,KAA0B,kBAA1B,CACA,OAAQC,WAAR,CAAqBC,QAArB,KAAoC,OAApC,CACA,MAAOC,cAAP,KAA0B,gCAA1B,CACA,MAAOC,IAAP,KAAgB,iBAAhB,CACA,OAAQC,QAAR,KAAuB,sBAAvB,CACA,MAAOC,SAAP,KAAqB,2BAArB,CACA,OAAQC,MAAR,KAAqB,eAArB,CACA,MAAO,iBAAP,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,MAAO,uCAAP,C,wFAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACrB,GAAMC,MAAK,CAAGX,WAAW,CAAC,SAAAY,KAAK,QAAIA,MAAK,CAACC,IAAN,CAAWF,KAAf,EAAN,CAAzB,CACA,GAAMG,SAAQ,CAAGb,WAAW,EAA5B,CAEA;AACA,cAA0BE,QAAQ,CAAC,EAAD,CAAlC,wCAAOY,KAAP,eAAcC,QAAd,eACA,eAA8Bb,QAAQ,CAAC,EAAD,CAAtC,yCAAOc,OAAP,eAAgBC,UAAhB,eACA,eAA0Bf,QAAQ,CAAC,CACjCgB,UAAU,CAAE,EADqB,CAEjCC,WAAW,CAAE,yBAFoB,CAAD,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eAIA,GAAMC,UAAS,CAAGrB,WAAW,CAAC,UAAM,CAClC,MAAOmB,MAAK,CAACF,UAAN,GAAqB,EAArB,EAA2BF,OAAO,GAAK,EAAvC,EAA6CF,KAAK,GAAK,EAA9D,CACD,CAF4B,CAE1B,CAACM,KAAD,CAAQN,KAAR,CAAeE,OAAf,CAF0B,CAA7B,CAIA,GAAMO,aAAY,CAAGtB,WAAW,wEAAC,kKAEvBuB,QAFuB,CAEZ,GAAIC,SAAJ,EAFY,CAG7BD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,CAAyBZ,KAAzB,EACAU,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2BV,OAA3B,EACAQ,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwBN,KAAK,CAACF,UAA9B,EACAM,QAAQ,CAACE,MAAT,CAAgB,SAAhB,CAA2BrB,QAAQ,CAACsB,KAAT,CAAejB,KAAf,CAA3B,EAN6B,sBAQvBN,IAAG,CAACwB,IAAJ,CAAS,YAAT,CAAuBJ,QAAvB,CARuB,QAS7BK,MAAM,CAACC,KAAP,CAAa,iBAAb,EACAjB,QAAQ,CAAC,aAAD,CAAR,CAV6B,iFAY7B;AACAL,KAAK,CAACuB,KAAN,CAAY,iCAAmC,IAA/C,CAAqD,CACnDC,QAAQ,CAAE,YADyC,CAArD,EAb6B,qEAAD,GAkB7B,CAACV,SAAD,CAlB6B,CAAhC,CAoBA,mBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,YAAK,SAAS,CAAC,iBAAf,4EADF,cAIE,YAAK,SAAS,CAAC,cAAf,UACGA,SAAS,gBACR,KAAC,MAAD,EACE,OAAO,CAAEC,YADX,CAEE,SAAS,CAAC,gBAFZ,CAGE,OAAO,CAAC,UAHV,kDADQ,cASR,KAAC,MAAD,EACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAC,UAFV,CAGE,IAAI,CAAC,OAHP,2GAVJ,EAJF,cAuBE,aAAK,SAAS,CAAC,eAAf,wBACE,KAAC,aAAD,EAAe,QAAQ,CAAEF,QAAzB,CAAmC,WAAW,CAAED,KAAK,CAACD,WAAtD,EADF,cAEE,KAAC,QAAD,EAAU,QAAQ,CAAEJ,QAApB,CAA8B,UAAU,CAAEE,UAA1C,CAAsD,KAAK,CAAEH,KAA7D,CAAoE,OAAO,CAAEE,OAA7E,EAFF,GAvBF,GADF,CA8BD,CAjED,CAmEA,cAAeP,SAAf"},"metadata":{},"sourceType":"module"}