{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/avocado-dev/Desktop/Programming/gospelchurch-FE-React/gospelchurch-FE-React-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/avocado-dev/Desktop/Programming/gospelchurch-FE-React/gospelchurch-FE-React-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/avocado-dev/Desktop/Programming/gospelchurch-FE-React/gospelchurch-FE-React-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Pagination}from\"@mui/material\";import{Card}from\"../../components/Card\";import{useEffect,useState}from\"react\";import api from\"../../utils/api\";import{useSearchParams}from\"react-router-dom\";import\"../board-list/boardList.scss\";import{useSelector}from\"react-redux\";import{jwtUtils}from\"../../utils/jwtUtils\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyBoardList=function MyBoardList(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),pageCount=_useState2[0],setPageCount=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),boardList=_useState4[0],setBoardList=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];// userÏùò idÎ•º ÏïåÏïÑÎÇ¥Í∏∞ ÏúÑÌï¥ token Í∞ÄÏ†∏Ïò§Í∏∞\nvar token=useSelector(function(state){return state.Auth.token;});// Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå Ï†ÑÏ≤¥ Í≤åÏãúÎ¨º Í∞ØÏàò Í∞ÄÏ†∏ÏôÄÏÑú ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞\n// Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\nuseEffect(function(){// ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\nvar getBoardList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var page_number,user_id,_yield$api$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:page_number=searchParams.get(\"page\");user_id=jwtUtils.getId(token);_context.next=4;return api.get(\"/api/board/user/list?page_number=\".concat(page_number,\"&page_size=4&user_id=\").concat(user_id));case 4:_yield$api$get=_context.sent;data=_yield$api$get.data;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getBoardList(){return _ref.apply(this,arguments);};}();// ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨ºÎ°ú ÏÉÅÌÉú Î≥ÄÍ≤ΩÌïòÍ∏∞\ngetBoardList().then(function(result){return setBoardList(result);});// Í≤åÏãúÎ¨º Ï†ÑÏ≤¥ Í∞ØÏàò Íµ¨ÌïòÍ∏∞\nvar getTotalBoard=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var user_id,_yield$api$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:user_id=jwtUtils.getId(token);_context2.next=3;return api.get(\"/api/board/user/count/\".concat(user_id));case 3:_yield$api$get2=_context2.sent;data=_yield$api$get2.data;return _context2.abrupt(\"return\",data.total);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function getTotalBoard(){return _ref2.apply(this,arguments);};}();// ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞: (Ï†ÑÏ≤¥ board Í∞ØÏàò) / (Ìïú ÌéòÏù¥ÏßÄ Í∞ØÏàò) Í≤∞Í≥º Ïò¨Î¶º\ngetTotalBoard().then(function(result){return setPageCount(Math.ceil(result/4));});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"boardList-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"boardList-header\",children:\"\\uB098\\uC758 \\uAC8C\\uC2DC\\uBB3C \\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"boardList-body\",children:boardList.map(function(item,index){return/*#__PURE__*/_jsx(Card,{username:item.user.username,date:moment(item.created).add(9,\"hour\").format('YYYY-MM-DD'),title:item.title,content:item.content,board_id:item.id,img_url:\"/api/image/view/\".concat(item.id)},item.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"boardList-footer\",children:/*#__PURE__*/_jsx(Pagination,{variant:\"outlined\",color:\"primary\",page:Number(searchParams.get(\"page\")),count:pageCount,size:\"large\",onChange:function onChange(e,value){window.location.href=\"/myboard-list?page=\".concat(value);},showFirstButton:true,showLastButton:true})})]});};export default MyBoardList;","map":{"version":3,"names":["Pagination","Card","useEffect","useState","api","useSearchParams","useSelector","jwtUtils","moment","MyBoardList","pageCount","setPageCount","boardList","setBoardList","searchParams","setSearchParams","token","state","Auth","getBoardList","page_number","get","user_id","getId","data","then","result","getTotalBoard","total","Math","ceil","map","item","index","user","username","created","add","format","title","content","id","Number","e","value","window","location","href"],"sources":["C:/Users/avocado-dev/Desktop/Programming/gospelchurch-FE-React/gospelchurch-FE-React-main/src/pages/myboard-list/MyBoardList.js"],"sourcesContent":["import {Pagination} from \"@mui/material\";\nimport {Card} from \"../../components/Card\";\nimport {useEffect, useState} from \"react\";\nimport api from \"../../utils/api\";\nimport {useSearchParams} from \"react-router-dom\";\nimport \"../board-list/boardList.scss\";\nimport {useSelector} from \"react-redux\";\nimport {jwtUtils} from \"../../utils/jwtUtils\";\nimport moment from \"moment\";\n\nconst MyBoardList = () => {\n  const [pageCount, setPageCount] = useState(0);\n  const [boardList, setBoardList] = useState([]);\n  const [searchParams, setSearchParams] = useSearchParams();\n  // userÏùò idÎ•º ÏïåÏïÑÎÇ¥Í∏∞ ÏúÑÌï¥ token Í∞ÄÏ†∏Ïò§Í∏∞\n  const token = useSelector(state => state.Auth.token);\n  // Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå Ï†ÑÏ≤¥ Í≤åÏãúÎ¨º Í∞ØÏàò Í∞ÄÏ†∏ÏôÄÏÑú ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞\n  // Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\n  useEffect(() => {\n    // ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\n    const getBoardList = async () => {\n      const page_number = searchParams.get(\"page\");\n      const user_id = jwtUtils.getId(token);\n      const {data} = await api.get(`/api/board/user/list?page_number=${page_number}&page_size=4&user_id=${user_id}`);\n      return data;\n    }\n    // ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨ºÎ°ú ÏÉÅÌÉú Î≥ÄÍ≤ΩÌïòÍ∏∞\n    getBoardList().then(result => setBoardList(result));\n    // Í≤åÏãúÎ¨º Ï†ÑÏ≤¥ Í∞ØÏàò Íµ¨ÌïòÍ∏∞\n    const getTotalBoard = async () => {\n      const user_id = jwtUtils.getId(token);\n      const {data} = await api.get(`/api/board/user/count/${user_id}`);\n      return data.total;\n    }\n    // ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞: (Ï†ÑÏ≤¥ board Í∞ØÏàò) / (Ìïú ÌéòÏù¥ÏßÄ Í∞ØÏàò) Í≤∞Í≥º Ïò¨Î¶º\n    getTotalBoard().then(result => setPageCount(Math.ceil(result / 4)));\n  }, [])\n\n  return (\n    <div className=\"boardList-wrapper\">\n      <div className=\"boardList-header\">\n        ÎÇòÏùò Í≤åÏãúÎ¨º üìù\n      </div>\n      <div className=\"boardList-body\">\n        {boardList.map((item, index) => (\n          <Card key={item.id} username={item.user.username} date={moment(item.created).add(9, \"hour\").format('YYYY-MM-DD')}\n                title={item.title} content={item.content}\n                board_id={item.id} img_url={`/api/image/view/${item.id}`}\n          />\n        ))}\n      </div>\n      <div className=\"boardList-footer\">\n        {/*ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò: countÏóê ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏, pageÏóê ÌéòÏù¥ÏßÄ Î≤àÌò∏ ÎÑ£Í∏∞*/}\n        <Pagination\n          variant=\"outlined\" color=\"primary\" page={Number(searchParams.get(\"page\"))}\n          count={pageCount} size=\"large\"\n          onChange={(e, value) => {\n            window.location.href = `/myboard-list?page=${value}`;\n          }}\n          showFirstButton showLastButton\n        />\n      </div>\n    </div>\n  )\n}\nexport default MyBoardList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}