{"ast":null,"code":"import _regeneratorRuntime from\"/Users/suni94/dev/dbord-FE-React-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/suni94/dev/dbord-FE-React-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/suni94/dev/dbord-FE-React-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Pagination}from\"@mui/material\";import{Card}from\"../../components/Card\";import{useEffect,useState}from\"react\";import axios from\"axios\";import{useSearchParams}from\"react-router-dom\";import\"./boardList.scss\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BoardList=function BoardList(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),pageCount=_useState2[0],setPageCount=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),boardList=_useState4[0],setBoardList=_useState4[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];// Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå Ï†ÑÏ≤¥ Í≤åÏãúÎ¨º Í∞ØÏàò Í∞ÄÏ†∏ÏôÄÏÑú ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞\n// Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\nuseEffect(function(){// ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\nvar getBoardList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var page_number,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:page_number=searchParams.get(\"page\");_context.next=3;return axios.get(\"/api/board/list?page_number=\".concat(page_number,\"&page_size=4\"));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;return _context.abrupt(\"return\",data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getBoardList(){return _ref.apply(this,arguments);};}();// ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨ºÎ°ú ÏÉÅÌÉú Î≥ÄÍ≤ΩÌïòÍ∏∞\ngetBoardList().then(function(result){return setBoardList(result);});// Í≤åÏãúÎ¨º Ï†ÑÏ≤¥ Í∞ØÏàò Íµ¨ÌïòÍ∏∞\nvar getTotalBoard=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/api/board/count\");case 2:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;return _context2.abrupt(\"return\",data.total);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getTotalBoard(){return _ref2.apply(this,arguments);};}();// ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞: (Ï†ÑÏ≤¥ board Í∞ØÏàò) / (Ìïú ÌéòÏù¥ÏßÄ Í∞ØÏàò) Í≤∞Í≥º Ïò¨Î¶º\ngetTotalBoard().then(function(result){return setPageCount(Math.ceil(result/4));});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"boardList-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"boardList-header\",children:\"\\uC804\\uCCB4 \\uAC8C\\uC2DC\\uBB3C \\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"div\",{className:\"boardList-body\",children:boardList.map(function(item,index){return/*#__PURE__*/_jsx(Card,{username:item.user.username,date:moment(item.created).add(9,\"hour\").format('YYYY-MM-DD'),title:item.title,content:item.content,board_id:item.id,img_url:\"/api/image/view/\".concat(item.id)},item.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"boardList-footer\",children:/*#__PURE__*/_jsx(Pagination,{variant:\"outlined\",color:\"primary\",page:Number(searchParams.get(\"page\")),count:pageCount,size:\"large\",onChange:function onChange(e,value){window.location.href=\"/board-list?page=\".concat(value);},showFirstButton:true,showLastButton:true})})]});};export default BoardList;","map":{"version":3,"names":["Pagination","Card","useEffect","useState","axios","useSearchParams","moment","BoardList","pageCount","setPageCount","boardList","setBoardList","searchParams","setSearchParams","getBoardList","page_number","get","data","then","result","getTotalBoard","total","Math","ceil","map","item","index","user","username","created","add","format","title","content","id","Number","e","value","window","location","href"],"sources":["/Users/suni94/dev/dbord-FE-React-main/src/pages/board-list/BoardList.js"],"sourcesContent":["import {Pagination} from \"@mui/material\";\nimport {Card} from \"../../components/Card\";\nimport {useEffect, useState} from \"react\";\nimport axios from \"axios\";\nimport {useSearchParams} from \"react-router-dom\";\nimport \"./boardList.scss\";\nimport moment from \"moment\";\n\nconst BoardList = () => {\n  const [pageCount, setPageCount] = useState(0);\n  const [boardList, setBoardList] = useState([]);\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  // Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå Ï†ÑÏ≤¥ Í≤åÏãúÎ¨º Í∞ØÏàò Í∞ÄÏ†∏ÏôÄÏÑú ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞\n  // Î†åÎçîÎßÅ ÎêòÍ≥† ÌïúÎ≤àÎßå ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\n  useEffect(() => {\n    // ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨º Í∞ÄÏ†∏Ïò§Í∏∞\n    const getBoardList = async () => {\n      const page_number = searchParams.get(\"page\");\n      const {data} = await axios.get(`/api/board/list?page_number=${page_number}&page_size=4`);\n      return data;\n    }\n    // ÌòÑÏû¨ ÌéòÏù¥ÏßÄÏóê Ìï¥ÎãπÌïòÎäî Í≤åÏãúÎ¨ºÎ°ú ÏÉÅÌÉú Î≥ÄÍ≤ΩÌïòÍ∏∞\n    getBoardList().then(result => setBoardList(result));\n    // Í≤åÏãúÎ¨º Ï†ÑÏ≤¥ Í∞ØÏàò Íµ¨ÌïòÍ∏∞\n    const getTotalBoard = async () => {\n      const {data} = await axios.get(\"/api/board/count\");\n      return data.total;\n    }\n    // ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏ Íµ¨ÌïòÍ∏∞: (Ï†ÑÏ≤¥ board Í∞ØÏàò) / (Ìïú ÌéòÏù¥ÏßÄ Í∞ØÏàò) Í≤∞Í≥º Ïò¨Î¶º\n    getTotalBoard().then(result => setPageCount(Math.ceil(result / 4)));\n  }, [])\n\n  return (\n    <div className=\"boardList-wrapper\">\n      <div className=\"boardList-header\">\n        Ï†ÑÏ≤¥ Í≤åÏãúÎ¨º üìù\n      </div>\n      <div className=\"boardList-body\">\n        {boardList.map((item, index) => (\n          <Card key={item.id} username={item.user.username}\n                date={moment(item.created).add(9, \"hour\").format('YYYY-MM-DD')}\n                title={item.title} content={item.content}\n                board_id={item.id} img_url={`/api/image/view/${item.id}`}\n          />\n        ))}\n      </div>\n      <div className=\"boardList-footer\">\n        {/*ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò: countÏóê ÌéòÏù¥ÏßÄ Ïπ¥Ïö¥Ìä∏, pageÏóê ÌéòÏù¥ÏßÄ Î≤àÌò∏ ÎÑ£Í∏∞*/}\n        <Pagination\n          variant=\"outlined\" color=\"primary\" page={Number(searchParams.get(\"page\"))}\n          count={pageCount} size=\"large\"\n          onChange={(e, value) => {\n            window.location.href = `/board-list?page=${value}`;\n          }}\n          showFirstButton showLastButton\n        />\n      </div>\n    </div>\n\n  )\n}\nexport default BoardList;"],"mappings":"iYAAA,OAAQA,UAAR,KAAyB,eAAzB,CACA,OAAQC,IAAR,KAAmB,uBAAnB,CACA,OAAQC,SAAR,CAAmBC,QAAnB,KAAkC,OAAlC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAAQC,eAAR,KAA8B,kBAA9B,CACA,MAAO,kBAAP,CACA,MAAOC,OAAP,KAAmB,QAAnB,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtB,cAAkCJ,QAAQ,CAAC,CAAD,CAA1C,wCAAOK,SAAP,eAAkBC,YAAlB,eACA,eAAkCN,QAAQ,CAAC,EAAD,CAA1C,yCAAOO,SAAP,eAAkBC,YAAlB,eACA,qBAAwCN,eAAe,EAAvD,sDAAOO,YAAP,sBAAqBC,eAArB,sBAEA;AACA;AACAX,SAAS,CAAC,UAAM,CACd;AACA,GAAMY,aAAY,4FAAG,2KACbC,WADa,CACCH,YAAY,CAACI,GAAb,CAAiB,MAAjB,CADD,uBAEEZ,MAAK,CAACY,GAAN,uCAAyCD,WAAzC,iBAFF,uCAEZE,IAFY,kBAEZA,IAFY,iCAGZA,IAHY,wDAAH,kBAAZH,aAAY,0CAAlB,CAKA;AACAA,YAAY,GAAGI,IAAf,CAAoB,SAAAC,MAAM,QAAIR,aAAY,CAACQ,MAAD,CAAhB,EAA1B,EACA;AACA,GAAMC,cAAa,6FAAG,4LACChB,MAAK,CAACY,GAAN,CAAU,kBAAV,CADD,yCACbC,IADa,mBACbA,IADa,kCAEbA,IAAI,CAACI,KAFQ,0DAAH,kBAAbD,cAAa,2CAAnB,CAIA;AACAA,aAAa,GAAGF,IAAhB,CAAqB,SAAAC,MAAM,QAAIV,aAAY,CAACa,IAAI,CAACC,IAAL,CAAUJ,MAAM,CAAG,CAAnB,CAAD,CAAhB,EAA3B,EACD,CAhBQ,CAgBN,EAhBM,CAAT,CAkBA,mBACE,aAAK,SAAS,CAAC,mBAAf,wBACE,YAAK,SAAS,CAAC,kBAAf,0DADF,cAIE,YAAK,SAAS,CAAC,gBAAf,UACGT,SAAS,CAACc,GAAV,CAAc,SAACC,IAAD,CAAOC,KAAP,qBACb,KAAC,IAAD,EAAoB,QAAQ,CAAED,IAAI,CAACE,IAAL,CAAUC,QAAxC,CACM,IAAI,CAAEtB,MAAM,CAACmB,IAAI,CAACI,OAAN,CAAN,CAAqBC,GAArB,CAAyB,CAAzB,CAA4B,MAA5B,EAAoCC,MAApC,CAA2C,YAA3C,CADZ,CAEM,KAAK,CAAEN,IAAI,CAACO,KAFlB,CAEyB,OAAO,CAAEP,IAAI,CAACQ,OAFvC,CAGM,QAAQ,CAAER,IAAI,CAACS,EAHrB,CAGyB,OAAO,2BAAqBT,IAAI,CAACS,EAA1B,CAHhC,EAAWT,IAAI,CAACS,EAAhB,CADa,EAAd,CADH,EAJF,cAaE,YAAK,SAAS,CAAC,kBAAf,uBAEE,KAAC,UAAD,EACE,OAAO,CAAC,UADV,CACqB,KAAK,CAAC,SAD3B,CACqC,IAAI,CAAEC,MAAM,CAACvB,YAAY,CAACI,GAAb,CAAiB,MAAjB,CAAD,CADjD,CAEE,KAAK,CAAER,SAFT,CAEoB,IAAI,CAAC,OAFzB,CAGE,QAAQ,CAAE,kBAAC4B,CAAD,CAAIC,KAAJ,CAAc,CACtBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,4BAA2CH,KAA3C,EACD,CALH,CAME,eAAe,KANjB,CAMkB,cAAc,KANhC,EAFF,EAbF,GADF,CA4BD,CArDD,CAsDA,cAAe9B,UAAf"},"metadata":{},"sourceType":"module"}